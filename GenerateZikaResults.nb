(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     65349,       1619]
NotebookOptionsPosition[     58169,       1436]
NotebookOutlinePosition[     58544,       1452]
CellTagsIndexPosition[     58501,       1449]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Generate results for Zika Vaccine", "Title",
 CellChangeTimes->{{3.6785318163621025`*^9, 
  3.678531826289426*^9}},ExpressionUUID->"c59ccf06-6465-4524-8110-\
0fbfbd0ca33e"],

Cell[BoxData[
 RowBox[{"Quit", "[", "]"}]], "Input",
 CellChangeTimes->{{3.665342534050747*^9, 3.6653425348098574`*^9}, 
   3.7163241980964704`*^9, {3.7163244670996623`*^9, 
   3.7163244707872763`*^9}},ExpressionUUID->"349ae692-e577-499d-ae5a-\
9434b97529ed"],

Cell[CellGroupData[{

Cell["Setup", "Section",
 CellChangeTimes->{{3.6259225019784937`*^9, 3.62592250403695*^9}, {
  3.664885553142358*^9, 3.664885554407996*^9}, {3.665766751259662*^9, 
  3.6657667516670265`*^9}},ExpressionUUID->"24ed90cd-875a-4625-92d3-\
b3e76788c346"],

Cell[CellGroupData[{

Cell["Headers", "Subsection",
 CellChangeTimes->{{3.6732868214094515`*^9, 
  3.6732868227639284`*^9}},ExpressionUUID->"13fc85a0-8966-465d-8e8d-\
b38de185d382"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"$CommandLine", "[", 
      RowBox[{"[", "2", "]"}], "]"}], "\[Equal]", "\"\<-wstp\>\""}], ",", 
    RowBox[{"ClusterRun", "=", "False"}], ",", 
    RowBox[{"ClusterRun", "=", "True"}]}], "]"}], ";"}]], "Code",
 CellChangeTimes->{{3.6635915774477224`*^9, 3.663591579713333*^9}, {
  3.665767981221537*^9, 
  3.6657679920566235`*^9}},ExpressionUUID->"ddf0b250-36b5-42db-94ee-\
d2adbd28380d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{"ClusterRun", ",", 
    RowBox[{"SetDirectory", "[", "\"\<./\>\"", "]"}], ",", 
    RowBox[{"SetDirectory", "[", 
     RowBox[{"NotebookDirectory", "[", "]"}], "]"}]}], "]"}], ";"}]], "Code",
 CellChangeTimes->{{3.6657667552011914`*^9, 3.665766766321019*^9}, {
   3.6657668162019587`*^9, 3.6657668163894596`*^9}, 3.676979764979746*^9, {
   3.684064288886879*^9, 
   3.6840642921038885`*^9}},ExpressionUUID->"5dfa7cda-022a-40e7-be50-\
65bbce4bb351"],

Cell[BoxData[
 RowBox[{"Import", "[", "\"\<Zika vaccine model setup.m\>\"", "]"}]], "Code",
 CellChangeTimes->{{3.665330292895352*^9, 
  3.665330311253338*^9}},ExpressionUUID->"93ee99b5-8256-4e67-882e-\
9d4586934bab"]
}, Closed]],

Cell[CellGroupData[{

Cell["Read in transmission rates", "Subsection",
 CellChangeTimes->{{3.7111211962753797`*^9, 
  3.711121201788829*^9}},ExpressionUUID->"6620f76a-bd40-4d38-9206-\
402189f9a0ee"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  RowBox[{"NotebookDirectory", "[", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.71096004785981*^9, 
  3.710960051706318*^9}},ExpressionUUID->"30b61c03-34c9-457f-a8e9-\
a4f8b518e8c4"],

Cell[BoxData["\<\"C:\\\\Users\\\\carbon\\\\Dropbox\\\\Code\\\\Git\\\\\
ZikaVaccineModel\"\>"], "Output",
 CellChangeTimes->{
  3.7109600519848194`*^9, 3.711121254399364*^9, 3.711122009012484*^9, 
   3.7111292393374877`*^9, 3.7111884423256207`*^9, 3.7112036024889755`*^9, 
   3.71121923474632*^9, 3.711284611708905*^9, 3.7113019902549195`*^9, 
   3.711303600823534*^9, 3.711306240054864*^9, 3.7113095792610083`*^9, 
   3.711312138026945*^9, 3.711312688493217*^9, 3.711316938995767*^9, 
   3.711323466872837*^9, 3.711385711032054*^9, 3.7113898411951303`*^9, 
   3.7114484737411947`*^9, 3.7114537665770435`*^9, 3.7114538087615013`*^9, 
   3.711455462659588*^9, 3.711461405640771*^9, 3.7114616861748667`*^9, 
   3.7114618873130465`*^9, 3.7114755559496346`*^9, 3.711716223006048*^9, 
   3.71173421674021*^9, {3.711734778023448*^9, 3.7117347983898706`*^9}, 
   3.711740449946512*^9, 3.7117990633470297`*^9, 3.7118028914663496`*^9, 
   3.7118045741787815`*^9, 3.7118107419522715`*^9, 3.7118126158052783`*^9, 
   3.711888894070585*^9, 3.7119051606887083`*^9, 3.7119209746914873`*^9, 
   3.7119813381125298`*^9, 3.7138838550640764`*^9, 3.7138842577899837`*^9, 
   3.7138845188101077`*^9, 3.714303175276029*^9, 3.714303358496426*^9, 
   3.7143203412704616`*^9, 3.7143220332610807`*^9, 3.714322106561055*^9, 
   3.7143221424205647`*^9, 3.7151093683797226`*^9, 3.71517787624046*^9, 
   3.715340941231011*^9, 3.716322296908173*^9, 3.716324209815663*^9, 
   3.7163244797486286`*^9, 3.716325013673271*^9, 3.71632516497968*^9, 
   3.716325661717451*^9, 3.7164708955584145`*^9, 
   3.7164711242743635`*^9},ExpressionUUID->"2a6e7d32-6926-49c5-8d8b-\
bc71377a277e"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"calibratedTransmissionRates", "=", 
   RowBox[{"Get", "[", "\"\<nonsexualTransmissionRates.dat\>\"", "]"}]}], 
  ";"}]], "Code",
 CellChangeTimes->{{3.7109600550736227`*^9, 3.7109600907297935`*^9}, {
   3.7111212565395665`*^9, 3.711121268473462*^9}, 
   3.716471122182578*^9},ExpressionUUID->"fe7e3218-656c-44f2-b3e6-\
146f38f79bbf"]
}, Closed]],

Cell[CellGroupData[{

Cell["Setup scenario functionality", "Subsection",
 CellChangeTimes->{{3.7111213316026363`*^9, 
  3.7111213359821997`*^9}},ExpressionUUID->"97ada040-05c0-457b-bb5b-\
1c2f80f9c61f"],

Cell[CellGroupData[{

Cell["Core model without vaccination", "Subsubsection",
 CellChangeTimes->{{3.7111293585374885`*^9, 3.711129363719784*^9}, 
   3.7111321336969285`*^9},ExpressionUUID->"4a372468-896e-4d06-951e-\
4772f5dc9821"],

Cell[BoxData[{
 RowBox[{"Clear", "@", "runBaseModel"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"runBaseModel", "[", 
   RowBox[{"country_", ",", "betaHV_", ",", "betaMF_", ",", 
    RowBox[{"parameterOverride_:", 
     RowBox[{"{", "}"}]}]}], "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"basemodel", "=", 
       RowBox[{"Get", "[", 
        RowBox[{"\"\<basemodel\>\"", "<>", "country", "<>", "\"\<.dat\>\""}], 
        "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"startyr", "=", "0"}], ",", 
      RowBox[{"endyr", "=", "10"}]}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"ComputeFinalTimeSeries", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Join", "[", 
       RowBox[{"parameterOverride", ",", 
        RowBox[{"BaseParameters", "[", 
         RowBox[{"country", ",", "betaHV", ",", "betaMF"}], "]"}]}], "]"}], 
      ",", "\[IndentingNewLine]", 
      RowBox[{"Flatten", "[", 
       RowBox[{"{", "NoVaccScen", "}"}], "]"}], ",", "\[IndentingNewLine]", 
      "country", ",", 
      RowBox[{"startcondsBase", "[", 
       RowBox[{"country", ",", "startyr", ",", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}], "&"}], ")"}], ",", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}], "&"}], ")"}], ",", 
        RowBox[{"(", 
         RowBox[{"0", "&"}], ")"}], ",", 
        RowBox[{"(", 
         RowBox[{"0", "&"}], ")"}]}], "]"}], ",", "startyr", ",", "endyr"}], 
     "]"}]}], "\[IndentingNewLine]", "]"}]}]}], "Code",
 CellChangeTimes->{{3.710604651269602*^9, 3.7106046771915855`*^9}, {
  3.710604757101575*^9, 3.710604761005576*^9}, {3.710604815870621*^9, 
  3.710604909422626*^9}, {3.710605281880785*^9, 3.7106052908843284`*^9}, {
  3.7106053284677196`*^9, 3.710605338446305*^9}, {3.7106054915873947`*^9, 
  3.7106055266427875`*^9}, {3.710697150988143*^9, 3.7106971512888637`*^9}, {
  3.711121448121833*^9, 3.711121500810484*^9}, {3.71112156330505*^9, 
  3.711121567611865*^9}},ExpressionUUID->"8d4bc2e2-a882-4415-8b71-\
3075877bd6f7"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Core model with vaccination", "Subsubsection",
 CellChangeTimes->{{3.711129436584281*^9, 3.7111294394080257`*^9}, 
   3.711132129513037*^9},ExpressionUUID->"4e3c43ea-e205-4b7f-be66-\
1203ce98a326"],

Cell[BoxData[{
 RowBox[{"Clear", "[", 
  RowBox[{"immunefunction", ",", "immunefunctionrange"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"immunefunction", "[", 
    RowBox[{
    "priorR_", ",", "ageover_", ",", "vaccagelow_", ",", "vaccagehigh_", ",", 
     "vaccrate_"}], "]"}], ":=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"Which", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"#", "<", "ageover"}], "&&", 
        RowBox[{"!", 
         RowBox[{"(", 
          RowBox[{
          "vaccagelow", "\[LessEqual]", "#", "\[LessEqual]", "vaccagehigh"}], 
          ")"}]}]}], ",", 
       RowBox[{"{", 
        RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"#", "<", "ageover"}], "&&", 
        RowBox[{"(", 
         RowBox[{
         "vaccagelow", "\[LessEqual]", "#", "\[LessEqual]", "vaccagehigh"}], 
         ")"}]}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"1", "-", "vaccrate"}], ",", "0", ",", "vaccrate"}], "}"}], 
       ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"#", "\[GreaterEqual]", "ageover"}], "&&", 
        RowBox[{"!", 
         RowBox[{"(", 
          RowBox[{
          "vaccagelow", "\[LessEqual]", "#", "\[LessEqual]", "vaccagehigh"}], 
          ")"}]}]}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1", "-", "priorR"}], ")"}], ",", "priorR", ",", "0"}], 
        "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"#", "\[GreaterEqual]", "ageover"}], "&&", 
        RowBox[{"(", 
         RowBox[{
         "vaccagelow", "\[LessEqual]", "#", "\[LessEqual]", "vaccagehigh"}], 
         ")"}]}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"1", "-", "priorR"}], ")"}], "*", 
          RowBox[{"(", 
           RowBox[{"1", "-", "vaccrate"}], ")"}]}], ",", "priorR", ",", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"1", "-", "priorR"}], ")"}], "*", "vaccrate"}]}], "}"}]}], 
      "]"}], "&"}], ")"}]}], "\n"}], "\n", 
 RowBox[{
  RowBox[{"immunefunctionrange", "[", 
   RowBox[{
   "priorR_", ",", "ageover_", ",", "vaccagerange_", ",", "vaccrate_"}], 
   "]"}], ":=", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"Which", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"#", "<", "ageover"}], "&&", 
       RowBox[{"!", 
        RowBox[{"MemberQ", "[", 
         RowBox[{"vaccagerange", ",", "#"}], "]"}]}]}], ",", 
      RowBox[{"{", 
       RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"#", "<", "ageover"}], "&&", 
       RowBox[{"MemberQ", "[", 
        RowBox[{"vaccagerange", ",", "#"}], "]"}]}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"1", "-", "vaccrate"}], ",", "0", ",", "vaccrate"}], "}"}], 
      ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"#", "\[GreaterEqual]", "ageover"}], "&&", 
       RowBox[{"!", 
        RowBox[{"MemberQ", "[", 
         RowBox[{"vaccagerange", ",", "#"}], "]"}]}]}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"1", "-", "priorR"}], ")"}], ",", "priorR", ",", "0"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"#", "\[GreaterEqual]", "ageover"}], "&&", 
       RowBox[{"MemberQ", "[", 
        RowBox[{"vaccagerange", ",", "#"}], "]"}]}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1", "-", "priorR"}], ")"}], "*", 
         RowBox[{"(", 
          RowBox[{"1", "-", "vaccrate"}], ")"}]}], ",", "priorR", ",", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1", "-", "priorR"}], ")"}], "*", "vaccrate"}]}], "}"}]}], 
     "]"}], "&"}], ")"}]}]}], "Code",
 CellChangeTimes->{{3.6846099579857707`*^9, 3.684609994540243*^9}, {
  3.6846100832380066`*^9, 3.6846100893161163`*^9}, {3.6847671834342003`*^9, 
  3.684767186974285*^9}, {3.684767276463111*^9, 3.684767278293569*^9}, {
  3.68692962868551*^9, 3.6869296293714733`*^9}, {3.6869339464031935`*^9, 
  3.6869339503775578`*^9}},ExpressionUUID->"614bd60b-06bf-4b7c-9a45-\
337692100cf5"],

Cell[BoxData[{
 RowBox[{"Clear", "[", 
  RowBox[{"FemaleImmuneFunction", ",", "MaleImmuneFunction"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"FemaleImmuneFunction", "[", 
    RowBox[{
    "femaleagerange_", ",", "priorR_", ",", "ageover_", ",", "vaccagelow_", 
     ",", "vaccagehigh_", ",", "femalevacc_", ",", "vaccrate_"}], "]"}], ":=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"femaleagerange", "\[Equal]", 
      RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"immunefunction", "[", 
      RowBox[{
      "priorR", ",", "ageover", ",", "vaccagelow", ",", "vaccagehigh", ",", 
       RowBox[{"If", "[", 
        RowBox[{"femalevacc", ",", "vaccrate", ",", "0"}], "]"}]}], "]"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"immunefunctionrange", "[", 
      RowBox[{
      "priorR", ",", "ageover", ",", "femaleagerange", ",", "vaccrate"}], 
      "]"}]}], "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MaleImmuneFunction", "[", 
   RowBox[{
   "maleagerange_", ",", "priorR_", ",", "ageover_", ",", "vaccagelow_", ",", 
    "vaccagehigh_", ",", "malevacc_", ",", "vaccrate_"}], "]"}], ":=", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"maleagerange", "\[Equal]", 
     RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
    RowBox[{"immunefunction", "[", 
     RowBox[{
     "priorR", ",", "ageover", ",", "vaccagelow", ",", "vaccagehigh", ",", 
      RowBox[{"If", "[", 
       RowBox[{"malevacc", ",", "vaccrate", ",", "0"}], "]"}]}], "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"immunefunctionrange", "[", 
     RowBox[{"priorR", ",", "ageover", ",", "maleagerange", ",", "vaccrate"}],
      "]"}]}], "]"}]}]}], "Code",
 CellChangeTimes->{{3.711129929084054*^9, 
  3.7111299850609455`*^9}},ExpressionUUID->"b8c77106-1bfc-4cc3-ba67-\
8289422f03bb"],

Cell[BoxData[{
 RowBox[{"Clear", "[", 
  RowBox[{"femalecumlVacc", ",", "malecumlVacc"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"femalecumlVacc", "[", 
    RowBox[{
    "femaleagerange_", ",", "femalevacc_", ",", "vaccagelow_", ",", 
     "vaccagehigh_", ",", "vaccrate_"}], "]"}], ":=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"femaleagerange", "\[Equal]", 
      RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"femalevacc", "&&", 
          RowBox[{"(", 
           RowBox[{
           "vaccagelow", "\[LessEqual]", "#", "\[LessEqual]", "vaccagehigh"}],
            ")"}]}], ",", "vaccrate", ",", "0"}], "]"}], "&"}], ")"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"MemberQ", "[", 
          RowBox[{"femaleagerange", ",", 
           RowBox[{"Floor", "[", "#", "]"}]}], "]"}], ",", "vaccrate", ",", 
         "0"}], "]"}], "&"}], ")"}]}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"malecumlVacc", "[", 
   RowBox[{
   "maleagerange_", ",", "malevacc_", ",", "vaccagelow_", ",", "vaccagehigh_",
     ",", "vaccrate_"}], "]"}], ":=", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"maleagerange", "\[Equal]", 
     RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"malevacc", "&&", 
         RowBox[{"(", 
          RowBox[{
          "vaccagelow", "\[LessEqual]", "#", "\[LessEqual]", "vaccagehigh"}], 
          ")"}]}], ",", "vaccrate", ",", "0"}], "]"}], "&"}], ")"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"MemberQ", "[", 
         RowBox[{"maleagerange", ",", 
          RowBox[{"Floor", "[", "#", "]"}]}], "]"}], ",", "vaccrate", ",", 
        "0"}], "]"}], "&"}], ")"}]}], "]"}]}]}], "Code",
 CellChangeTimes->{
  3.7111299255899405`*^9, {3.711129995689145*^9, 
   3.7111300441224017`*^9}},ExpressionUUID->"5f965de3-7b85-4fcd-be40-\
5624405c6888"],

Cell[BoxData[{
 RowBox[{"Clear", "[", "quantifyImpact", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"quantifyImpact", "[", "\[IndentingNewLine]", 
   RowBox[{"model_", ",", 
    RowBox[{"(*", 
     RowBox[{
     "NDSolve", " ", "object", " ", "defined", " ", "for", " ", "the", " ", 
      "present", " ", "country"}], "*)"}], "\[IndentingNewLine]", "country_", 
    ",", "\[IndentingNewLine]", "\[IndentingNewLine]", "betaHV_", ",", 
    RowBox[{"(*", 
     RowBox[{"Vector", "-", 
      RowBox[{"borne", " ", "transmission", " ", "modifier"}]}], "*)"}], 
    "\[IndentingNewLine]", "betaMF_", ",", 
    RowBox[{"(*", 
     RowBox[{"Sexual", " ", "transmission", " ", "rate"}], "*)"}], 
    "\[IndentingNewLine]", "\n", 
    RowBox[{"vaccPars_:", 
     RowBox[{"{", "}"}]}], ",", 
    RowBox[{"(*", 
     RowBox[{"Vaccination", " ", "scenario", " ", "parameters"}], "*)"}], 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"parameterOverride_:", 
     RowBox[{"{", "}"}]}], ",", 
    RowBox[{"(*", 
     RowBox[{"Optional", " ", "override", " ", "of", " ", "parameters"}], 
     "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"startyr_:", "0"}], ",", 
    RowBox[{"endyr_:", "10"}], ",", "\n", "\[IndentingNewLine]", 
    RowBox[{"priorR_:", "0"}], ",", 
    RowBox[{"(*", 
     RowBox[{"Pre", "-", 
      RowBox[{"existing", " ", "population", " ", "immunity"}]}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"ageover_:", "0"}], ",", 
    RowBox[{"(*", 
     RowBox[{
     "Age", " ", "above", " ", "which", " ", "individuals", " ", "have", " ", 
      "immune", " ", "memory"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"lag_:", "0"}]}], 
   RowBox[{"(*", 
    RowBox[{
    "Time", " ", "between", " ", "vaccine", " ", "availability", " ", "and", 
     " ", "outbreak", " ", "start"}], "*)"}], "\[IndentingNewLine]", "]"}], ":=",
   "\[IndentingNewLine]", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"basemodel", "=", "model"}], ",", 
      RowBox[{"forceStartI", "=", 
       RowBox[{"(", 
        RowBox[{"lag", "\[Equal]", "0"}], ")"}]}], ",", 
      RowBox[{"epistart", "=", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"lag", "\[NotEqual]", "0"}], "&&", 
            RowBox[{"#", "\[Equal]", "lag"}]}], ",", "0.001", ",", "0"}], 
          "]"}], "&"}], ")"}]}]}], "}"}], ",", "\n", "\n", 
    RowBox[{"With", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"vaccrate", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"vaccrate", "/.", "vaccPars"}], "/.", 
           RowBox[{"vaccrate", "->", "0"}]}], ")"}]}], ",", 
        RowBox[{"(*", "Coverage", "*)"}], "\[IndentingNewLine]", 
        RowBox[{"vacceff", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"vacceff", "/.", "vaccPars"}], "/.", 
           RowBox[{"vacceff", "->", "0"}]}], ")"}]}], ",", 
        RowBox[{"(*", 
         RowBox[{"Vaccine", " ", "efficacy"}], "*)"}], "\[IndentingNewLine]", 
        RowBox[{"vaccagelow", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"vaccagelow", "/.", "vaccPars"}], "/.", 
           RowBox[{"vaccagelow", "\[Rule]", "15"}]}], ")"}]}], ",", 
        RowBox[{"(*", 
         RowBox[{"Youngest", " ", "age", " ", "to", " ", "vaccinate"}], 
         "*)"}], "\[IndentingNewLine]", 
        RowBox[{"vaccagehigh", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"vaccagehigh", "/.", "vaccPars"}], "/.", 
           RowBox[{"vaccagehigh", "\[Rule]", "49"}]}], ")"}]}], ",", 
        RowBox[{"(*", 
         RowBox[{"Oldest", " ", "age", " ", "to", " ", "vaccinate"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"malevacc", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"malevacc", "/.", "vaccPars"}], "/.", 
           RowBox[{"malevacc", "\[Rule]", "False"}]}], ")"}]}], ",", 
        RowBox[{"(*", 
         RowBox[{"Whether", " ", "to", " ", "vaccinate", " ", "males"}], 
         "*)"}], "\[IndentingNewLine]", 
        RowBox[{"femalevacc", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"femalevacc", "/.", "vaccPars"}], "/.", 
           RowBox[{"femalevacc", "->", "False"}]}], ")"}]}], ",", 
        RowBox[{"(*", 
         RowBox[{"Whether", " ", "to", " ", "vaccinate", " ", "females"}], 
         "*)"}], "\[IndentingNewLine]", 
        RowBox[{"maleagerange", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"maleagerange", "/.", "vaccPars"}], "/.", 
           RowBox[{"maleagerange", "\[Rule]", 
            RowBox[{"{", "}"}]}]}], ")"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"femaleagerange", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"femaleagerange", "/.", "vaccPars"}], "/.", 
           RowBox[{"femaleagerange", "\[Rule]", 
            RowBox[{"{", "}"}]}]}], ")"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"annualcovg", "=", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"annualcovg", "/.", "vaccPars"}], "/.", 
           RowBox[{"annualcovg", "\[Rule]", "True"}]}], ")"}]}]}], "}"}], ",",
       "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"ComputeFinalTimeSeries", "[", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{"parameterOverride", ",", 
          RowBox[{"{", 
           RowBox[{"\[Eta]", "\[Rule]", "vacceff"}], "}"}], ",", 
          RowBox[{"BaseParameters", "[", 
           RowBox[{"country", ",", "betaHV", ",", "betaMF"}], "]"}]}], "]"}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{"Flatten", "[", 
         RowBox[{"{", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{"annualcovg", ",", "\[IndentingNewLine]", 
             RowBox[{"AnnualVacc", "[", 
              RowBox[{"vaccrate", 
               RowBox[{"(*", "Coverage", "*)"}], ",", "\[IndentingNewLine]", 
               "malevacc", 
               RowBox[{"(*", 
                RowBox[{"Vaccinate", " ", "men"}], "*)"}], ",", 
               "\[IndentingNewLine]", "femalevacc", 
               RowBox[{"(*", 
                RowBox[{"Vaccinate", " ", "women"}], "*)"}], ",", 
               "\[IndentingNewLine]", "vaccagelow", ",", "vaccagelow", ",", 
               RowBox[{"(", 
                RowBox[{"1", "&"}], ")"}]}], 
              RowBox[{"(*", 
               RowBox[{"Vaccinate", " ", "every", " ", "year"}], "*)"}], 
              "]"}], ",", "Nothing"}], "]"}], ",", "\[IndentingNewLine]", 
           "NoVaccScen"}], "}"}], "\[IndentingNewLine]", "]"}], ",", 
        "\[IndentingNewLine]", "country", ",", "\[IndentingNewLine]", 
        RowBox[{"startcondsBase", "[", 
         RowBox[{"country", ",", "startyr", ",", "\[IndentingNewLine]", 
          RowBox[{"FemaleImmuneFunction", "[", 
           RowBox[{
           "femaleagerange", ",", "priorR", ",", "ageover", ",", "vaccagelow",
             ",", "vaccagehigh", ",", "femalevacc", ",", "vaccrate"}], "]"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"MaleImmuneFunction", "[", 
           RowBox[{
           "maleagerange", ",", "priorR", ",", "ageover", ",", "vaccagelow", 
            ",", "vaccagehigh", ",", "malevacc", ",", "vaccrate"}], "]"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"femalecumlVacc", "[", 
           RowBox[{
           "femaleagerange", ",", "femalevacc", ",", "vaccagelow", ",", 
            "vaccagehigh", ",", "vaccrate"}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"malecumlVacc", "[", 
           RowBox[{
           "maleagerange", ",", "malevacc", ",", "vaccagelow", ",", 
            "vaccagehigh", ",", "vaccrate"}], "]"}]}], "\[IndentingNewLine]", 
         "]"}], ",", "startyr", ",", "endyr"}], "]"}]}], 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}]}], "Code",
 CellChangeTimes->{{3.6847629145904675`*^9, 3.6847629694201946`*^9}, {
   3.684763001411869*^9, 3.6847630062570877`*^9}, {3.6847630527435303`*^9, 
   3.684763425354123*^9}, {3.6847635083643217`*^9, 3.684763526567835*^9}, {
   3.684763586808217*^9, 3.6847636500709267`*^9}, {3.68476380156796*^9, 
   3.684763839788124*^9}, {3.68476404473861*^9, 3.684764109928295*^9}, {
   3.6847645582338786`*^9, 3.6847647007228813`*^9}, {3.6847649562171297`*^9, 
   3.6847649772032247`*^9}, {3.684765021918293*^9, 3.684765024666889*^9}, 
   3.6847651083215075`*^9, {3.6847651546551857`*^9, 3.6847651564364443`*^9}, {
   3.6847653002076015`*^9, 3.684765315924237*^9}, {3.684765440355378*^9, 
   3.6847654413397636`*^9}, {3.68476581232965*^9, 3.6847659067820654`*^9}, {
   3.6847659632380733`*^9, 3.684765983655066*^9}, 3.684766227815091*^9, {
   3.6847663785511045`*^9, 3.6847664498571024`*^9}, {3.684766552551119*^9, 
   3.684766575455126*^9}, {3.684766936192151*^9, 3.684766962216155*^9}, {
   3.6847696575480375`*^9, 3.6847697255227947`*^9}, {3.684771445425482*^9, 
   3.6847714642591114`*^9}, {3.68477150817819*^9, 3.684771514116026*^9}, {
   3.685977350825337*^9, 3.6859773576183367`*^9}, {3.685977391449339*^9, 
   3.685977393409339*^9}, {3.6869303029986277`*^9, 3.6869303204066267`*^9}, {
   3.6869303820146317`*^9, 3.686930526326643*^9}, {3.6869329151115046`*^9, 
   3.686932919182268*^9}, {3.686933233925459*^9, 3.6869332361034575`*^9}, {
   3.6869339565978065`*^9, 3.6869339581494303`*^9}, {3.686934464151287*^9, 
   3.686934471499094*^9}, {3.6869345617930307`*^9, 3.6869345928547163`*^9}, {
   3.6869346247606287`*^9, 3.6869346770980906`*^9}, {3.686934726102643*^9, 
   3.6869347292807703`*^9}, 3.686934775354146*^9, {3.687016522095902*^9, 
   3.687016525928689*^9}, {3.6870221398495064`*^9, 3.687022162106982*^9}, {
   3.711130451478318*^9, 3.711130710941642*^9}, {3.711130753286908*^9, 
   3.711130753635105*^9}, {3.711131288008395*^9, 3.7111313749121323`*^9}, {
   3.7111314149602475`*^9, 3.711131466547476*^9}, {3.711131566108735*^9, 
   3.711131598756523*^9}, {3.711131721672257*^9, 3.711131722116062*^9}, {
   3.7111317828813653`*^9, 3.7111318152749805`*^9}, {3.711131855382534*^9, 
   3.711131995376522*^9}, {3.711132040801323*^9, 3.7111320412379045`*^9}, {
   3.7111323748782644`*^9, 
   3.711132436224741*^9}},ExpressionUUID->"01cb6d28-31b5-4510-b56b-\
519c2edd8149"],

Cell[TextData[StyleBox["VACCINATION RULES",
 FontWeight->"Bold"]], "Text",
 CellChangeTimes->{{3.711220186358526*^9, 
  3.711220188334138*^9}},ExpressionUUID->"f23ea951-ce36-423d-982f-\
437baa535e58"],

Cell[TextData[{
 "If ",
 StyleBox["femaleagerange",
  FontWeight->"Bold"],
 " is defined, mass vaccinate all females within the range at rate ",
 StyleBox["vaccrate",
  FontWeight->"Bold"],
 " at the model start. The same holds for ",
 StyleBox["maleagerange",
  FontWeight->"Bold"],
 ". \n\nIf ",
 StyleBox["femaleagerange",
  FontWeight->"Bold"],
 " is not defined (is {}) and if ",
 StyleBox["femalevacc",
  FontWeight->"Bold"],
 " is true, mass vaccinate all women between the ages ",
 StyleBox["vaccageLow",
  FontWeight->"Bold"],
 " and ",
 StyleBox["vaccagehigh",
  FontWeight->"Bold"],
 " at rate ",
 StyleBox["vaccrate",
  FontWeight->"Bold"],
 ". Same rule applies to men"
}], "Text",
 CellChangeTimes->{{3.711219939719449*^9, 3.7112199691619854`*^9}, {
  3.711220034387825*^9, 3.711220095297841*^9}, {3.7112203414715614`*^9, 
  3.7112203454177094`*^9}},ExpressionUUID->"27c809ec-b517-464e-a181-\
c5b4014d3b03"],

Cell[TextData[{
 "If ",
 StyleBox["annualcovg",
  FontWeight->"Bold"],
 " is true, vaccinate men (if ",
 StyleBox["malevacc",
  FontWeight->"Bold"],
 " is true) and women (if ",
 StyleBox["femalevacc",
  FontWeight->"Bold"],
 " is true) of age ",
 StyleBox["vaccagelow",
  FontWeight->"Bold"],
 " at annual rate ",
 StyleBox["vaccrate",
  FontWeight->"Bold"]
}], "Text",
 CellChangeTimes->{{3.711220117834943*^9, 
  3.711220174050251*^9}},ExpressionUUID->"31424df6-43fa-491c-9e8c-\
18feefa4fe54"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Setup best-fit scenarios", "Subsection",
 CellChangeTimes->{{3.7151094432240458`*^9, 
  3.715109452375614*^9}},ExpressionUUID->"296050f5-ca4d-457f-ab29-\
c44673368031"],

Cell["From \[OpenCurlyDoubleQuote]CalibrationPuertoRico.nb\
\[CloseCurlyDoubleQuote] analysis", "Text",
 CellChangeTimes->{{3.7151094535631137`*^9, 
  3.7151094596239896`*^9}},ExpressionUUID->"2e6d63b1-be0f-4bd1-857e-\
e3d888270d10"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"betaBestFit", "=", "0.259"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"seasonalityAmplitude", "=", 
   RowBox[{"7", "/", "10"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"seasonalityPhase", "=", 
    RowBox[{
     RowBox[{"-", "3"}], "*", 
     RowBox[{"Pi", "/", "10"}]}]}], ";"}], "\n"}], "\n", 
 RowBox[{
  RowBox[{"seasonalityFunction", "[", "country_", "]"}], ":=", 
  RowBox[{"(", 
   RowBox[{"MosqBirth", "\[Rule]", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"365", "/", "7.8"}], ")"}], "*", 
     RowBox[{"mosquitoPopulation", "[", "country", "]"}], "*", 
     RowBox[{"(", 
      RowBox[{"1", "-", 
       RowBox[{
        RowBox[{"7", "/", "10"}], "*", 
        RowBox[{"Sin", "[", 
         RowBox[{
          RowBox[{"Pi", "/", "5"}], "-", 
          RowBox[{"2", "*", "Pi", "*", "t"}]}], "]"}]}]}], ")"}]}]}], 
   ")"}]}]}], "Code",
 CellChangeTimes->{{3.7151094608739386`*^9, 3.715109480558256*^9}, {
   3.7163221716559677`*^9, 3.7163221770801682`*^9}, 3.716322284407734*^9, {
   3.716470866687172*^9, 3.7164708718638697`*^9}, {3.7164709365193996`*^9, 
   3.7164709497859373`*^9}},ExpressionUUID->"79b1b928-7c53-40e7-ae86-\
5bdad498ed5c"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Run time series of vaccination impact scenarios", "Section",
 CellChangeTimes->{{3.711132156723754*^9, 
  3.7111321623106375`*^9}},ExpressionUUID->"f28e4916-1a43-476a-b766-\
3666eb40ec97"],

Cell[CellGroupData[{

Cell["Run vaccine impact scenarios: no sexual transmission", "Subsection",
 CellChangeTimes->{{3.7117163285716085`*^9, 
  3.71171633521879*^9}},ExpressionUUID->"4787be02-9763-426f-8711-\
483819743994"],

Cell[CellGroupData[{

Cell["Run vaccine impact scenarios - \[OpenCurlyDoubleQuote]best fit\
\[CloseCurlyDoubleQuote] attack rate", "Subsubsection",
 CellChangeTimes->{{3.7111321639558506`*^9, 3.7111321676636906`*^9}, {
  3.7117162533134317`*^9, 
  3.71171625734925*^9}},ExpressionUUID->"0789a4df-8d80-4b93-be41-\
627993f465fe"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  RowBox[{"NotebookDirectory", "[", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.7114762905327024`*^9, 
  3.711476293868267*^9}},ExpressionUUID->"84dea54f-3062-4fce-a10d-\
cb18017c8b02"],

Cell[BoxData["\<\"C:\\\\Users\\\\carbon\\\\Dropbox\\\\Code\\\\Git\\\\\
ZikaVaccineModel\"\>"], "Output",
 CellChangeTimes->{3.7114762941818857`*^9, 3.7138841776478424`*^9, 
  3.7138842736232705`*^9, 3.713884519862337*^9, 3.715109419490514*^9, 
  3.716322297423795*^9, 3.716324210003165*^9, 3.7163244809915094`*^9, 
  3.716325014689993*^9, 3.7163251652248535`*^9, 
  3.7163256630363865`*^9},ExpressionUUID->"748706e9-4af8-4aaa-a49f-\
c702c8fb8873"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dynamic", "@", "vaccScen"}]], "Input",
 CellChangeTimes->{{3.7138845242919703`*^9, 
  3.7138845255084844`*^9}},ExpressionUUID->"6a27a51c-1b04-4d71-89b3-\
6402936eff09"],

Cell[BoxData[
 DynamicBox[ToBoxes[$CellContext`vaccScen, StandardForm],
  ImageSizeCache->{104., {0., 15.}}]], "Output",
 CellChangeTimes->{3.713884526222706*^9, 3.7151094204592876`*^9, 
  3.716322297606855*^9, 3.7163242100656676`*^9, 3.716324481945187*^9, 
  3.716325015583626*^9, 3.7163251653179197`*^9, 
  3.716325664322299*^9},ExpressionUUID->"acdfa068-8db4-4552-99cc-\
a00bc8c815ab"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"AbsoluteTiming", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"vaccineTimeSeriesScenarios", "=", 
    RowBox[{"With", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"country", "=", "\"\<Puerto Rico\>\""}], ",", 
        RowBox[{"betaHV", "=", "betaBestFit"}], ",", 
        RowBox[{"betaMF", "=", "0.1"}]}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"With", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"coremodel", "=", 
          RowBox[{"Get", "[", 
           RowBox[{
           "\"\<basemodel\>\"", "<>", "country", "<>", "\"\<.dat\>\""}], 
           "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Association", "[", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"vaccScen", "[", 
              RowBox[{"[", "1", "]"}], "]"}], "\[Rule]", 
             "\[IndentingNewLine]", 
             RowBox[{"With", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"data", "=", 
                 RowBox[{"quantifyImpact", "[", 
                  RowBox[{
                  "coremodel", ",", "country", ",", "betaHV", ",", "betaMF", 
                   ",", 
                   RowBox[{"vaccScen", "[", 
                    RowBox[{"[", "2", "]"}], "]"}], ",", 
                   RowBox[{"{", 
                    RowBox[{"MosqBirth", "\[Rule]", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"365", "/", "7.8"}], ")"}], "*", 
                    RowBox[{"mosquitoPopulation", "[", "country", "]"}], "*", 
                    RowBox[{"(", 
                    RowBox[{"1", "-", 
                    RowBox[{
                    RowBox[{"7", "/", "10"}], "*", 
                    RowBox[{"Sin", "[", 
                    RowBox[{
                    RowBox[{"Pi", "/", "5"}], "-", 
                    RowBox[{"2", "*", "Pi", "*", "t"}]}], "]"}]}]}], 
                    ")"}]}]}], "}"}]}], "]"}]}], "}"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Association", "[", 
                RowBox[{"{", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"\"\<allInfections\>\"", "\[Rule]", 
                   RowBox[{"pullAllInfections", "@", "data"}]}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"\"\<prenatalInfections\>\"", "\[Rule]", 
                   RowBox[{"pullPrenatalInfections", "[", 
                    RowBox[{"data", ",", "country"}], "]"}]}]}], 
                 "\[IndentingNewLine]", "}"}], "]"}]}], "\[IndentingNewLine]",
               "]"}]}], ")"}], ",", "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{"vaccScen", ",", 
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"\"\<NoVaccination\>\"", ",", 
                 RowBox[{"{", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
               RowBox[{"{", 
                RowBox[{"\"\<WHOfemale\>\"", ",", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"vaccrate", "\[Rule]", "0.9"}], ",", 
                   RowBox[{"vacceff", "\[Rule]", "0.75"}], ",", 
                   RowBox[{"vaccagelow", "\[Rule]", "15"}], ",", 
                   RowBox[{"vaccagehigh", "\[Rule]", "49"}], ",", 
                   RowBox[{"malevacc", "\[Rule]", "False"}], ",", 
                   RowBox[{"femalevacc", "\[Rule]", "True"}], ",", 
                   RowBox[{"annualcovg", "\[Rule]", "True"}]}], "}"}]}], 
                "}"}], ",", "\[IndentingNewLine]", 
               RowBox[{"{", 
                RowBox[{"\"\<WHOall\>\"", ",", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"vaccrate", "\[Rule]", "0.9"}], ",", 
                   RowBox[{"vacceff", "\[Rule]", "0.75"}], ",", 
                   RowBox[{"vaccagelow", "\[Rule]", "15"}], ",", 
                   RowBox[{"vaccagehigh", "\[Rule]", "49"}], ",", 
                   RowBox[{"malevacc", "\[Rule]", "True"}], ",", 
                   RowBox[{"femalevacc", "\[Rule]", "True"}], ",", 
                   RowBox[{"annualcovg", "\[Rule]", "True"}]}], "}"}]}], 
                "}"}], ",", "\[IndentingNewLine]", 
               RowBox[{"{", 
                RowBox[{"\"\<allfemale\>\"", ",", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"vaccrate", "\[Rule]", "0.9"}], ",", 
                   RowBox[{"vacceff", "\[Rule]", "0.75"}], ",", 
                   RowBox[{"vaccagelow", "\[Rule]", "9"}], ",", 
                   RowBox[{"vaccagehigh", "\[Rule]", "100"}], ",", 
                   RowBox[{"malevacc", "\[Rule]", "False"}], ",", 
                   RowBox[{"femalevacc", "\[Rule]", "True"}], ",", 
                   RowBox[{"annualcovg", "\[Rule]", "True"}]}], "}"}]}], 
                "}"}], ",", "\[IndentingNewLine]", 
               RowBox[{"{", 
                RowBox[{"\"\<allpopulation\>\"", ",", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"vaccrate", "\[Rule]", "0.9"}], ",", 
                   RowBox[{"vacceff", "\[Rule]", "0.75"}], ",", 
                   RowBox[{"vaccagelow", "\[Rule]", "9"}], ",", 
                   RowBox[{"vaccagehigh", "\[Rule]", "100"}], ",", 
                   RowBox[{"malevacc", "\[Rule]", "True"}], ",", 
                   RowBox[{"femalevacc", "\[Rule]", "True"}], ",", 
                   RowBox[{"annualcovg", "\[Rule]", "True"}]}], "}"}]}], 
                "}"}]}], "\[IndentingNewLine]", "}"}]}], "}"}]}], "]"}], 
         "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "]"}]], "Input",
 CellChangeTimes->{{3.7111321774987893`*^9, 3.711132191279798*^9}, {
   3.7111322306035113`*^9, 3.7111323522797003`*^9}, {3.711132464730587*^9, 
   3.711132467007018*^9}, {3.7111325008470564`*^9, 3.71113257366261*^9}, {
   3.7111326680279865`*^9, 3.711132722364884*^9}, {3.711132847957015*^9, 
   3.71113287825154*^9}, {3.7111330171753664`*^9, 3.711133042375311*^9}, {
   3.7111368221735907`*^9, 3.711136828128333*^9}, {3.711476116683987*^9, 
   3.711476135858944*^9}, {3.7114762092351694`*^9, 3.7114762562748637`*^9}, {
   3.7138843058993163`*^9, 3.7138843505230722`*^9}, {3.715109490781182*^9, 
   3.7151095267703066`*^9}, {3.7151095746212716`*^9, 
   3.7151096243430777`*^9}, {3.7163222093415737`*^9, 3.7163222447463493`*^9}, 
   3.7163244656456337`*^9, {3.7163251674314194`*^9, 
   3.716325220206826*^9}},ExpressionUUID->"6b3c0341-9bbb-4b3b-8725-\
3e706cb5254f"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"133.51048834615534`", ",", "Null"}], "}"}]], "Output",
 CellChangeTimes->{3.7111328709127617`*^9, 3.711132946894329*^9, 
  3.7111331108662434`*^9, 3.7114758167313433`*^9, 3.711476287608985*^9, 
  3.7114763596268167`*^9, 3.7138844301437855`*^9, 3.7138846026861887`*^9, 
  3.7151097204615808`*^9, 3.716322429271447*^9, 3.7163244143678265`*^9, 
  3.7163246586948647`*^9, 3.716325389964476*^9, 
  3.7163258003467236`*^9},ExpressionUUID->"a9a5a55c-34f7-472b-8fbc-\
7ae3263afde6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  RowBox[{
   RowBox[{"NotebookDirectory", "[", "]"}], "<>", 
   "\"\</GeneratedResults/VaccineImpactTimeSeries\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7114760001542125`*^9, 
  3.7114760189992886`*^9}},ExpressionUUID->"4da76c2d-8713-4a93-a8a4-\
4c140ba53e05"],

Cell[BoxData["\<\"C:\\\\Users\\\\carbon\\\\Dropbox\\\\Code\\\\Git\\\\\
ZikaVaccineModel\\\\GeneratedResults\\\\VaccineImpactTimeSeries\"\>"], \
"Output",
 CellChangeTimes->{{3.7114760122638025`*^9, 3.7114760193586664`*^9}, 
   3.711476365824461*^9, 3.713884432289296*^9, 3.7138846766596193`*^9, 
   3.715109844785929*^9, 3.716322429396448*^9, 3.7163244144313707`*^9, 
   3.7163258004277744`*^9},ExpressionUUID->"6c50bd8e-cdf3-475e-966a-\
84e78c732e7a"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"Put", "[", 
   RowBox[{
   "vaccineTimeSeriesScenarios", ",", 
    "\"\<vaccineTimeSeriesScenarios.dat\>\""}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.7114757634413614`*^9, 
  3.711475767499926*^9}},ExpressionUUID->"5d17dcef-39da-4514-830c-\
c8b0c38640c3"]
}, Closed]]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Run prior immunity / coverage contour scenarios", "Section",
 CellChangeTimes->{{3.7117331308761435`*^9, 
  3.7117331495179887`*^9}},ExpressionUUID->"733c7398-fc64-47d0-82bf-\
e6a698341f34"],

Cell[BoxData[
 RowBox[{"\n", 
  RowBox[{"(*", " ", 
   RowBox[{"PRIOR", " ", "COVERAGE", " ", "SCENARIO"}], " ", "*)"}], 
  "\n"}]], "Code",
 CellChangeTimes->{{3.711733152267993*^9, 
  3.711733159580187*^9}},ExpressionUUID->"bb7ad88e-2388-4784-92c2-\
5bf3b84ab011"],

Cell[CellGroupData[{

Cell["Setup code", "Subsubsection",
 CellChangeTimes->{{3.7112192748980975`*^9, 3.7112192766403723`*^9}, {
  3.711226002598155*^9, 
  3.7112260030327415`*^9}},ExpressionUUID->"4c4f8b6e-48ac-4355-b9af-\
5a5276a7a523"],

Cell["\<\
Assumptions / specifications for the \[OpenCurlyDoubleQuote]cases averted per \
vaccine\[CloseCurlyDoubleQuote] analysis:
1) Use a small vaccination rate of 0.01 to minimize nonlinear impact
2) Disable annual coverage, so only consider one-time mass vaccination\
\>", "Text",
 CellChangeTimes->{{3.711297748134208*^9, 
  3.711297804621227*^9}},ExpressionUUID->"5728e919-a7d3-4720-bb0a-\
e755462c4783"],

Cell[BoxData[{
 RowBox[{"Clear", "@", "runFrontierScenarios"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"runFrontierScenarios", "[", 
   RowBox[{
   "country_", ",", "attackRate_", ",", "basemodel_", ",", "vrate_", ",", 
    "veff_", ",", "mvacc_", ",", "vlow_", ",", "vhigh_", ",", 
    RowBox[{"maleAgeRange_:", 
     RowBox[{"{", "}"}]}], ",", 
    RowBox[{"femaleAgeRange_:", 
     RowBox[{"{", "}"}]}], ",", 
    RowBox[{"endyr_:", "10"}], ",", 
    RowBox[{"priorR_:", "0"}], ",", 
    RowBox[{"ageover_:", "0"}], ",", 
    RowBox[{"lag_:", "0"}]}], "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"betaHV", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"attackRate", "\[Equal]", "\"\<Best fit\>\""}], ",", 
         "betaBestFit", ",", 
         RowBox[{
          RowBox[{"calibratedTransmissionRates", "[", "country", "]"}], "[", 
          "attackRate", "]"}]}], "]"}]}], ",", 
      RowBox[{"betaMF", "=", "0.1"}]}], "\[IndentingNewLine]", "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"quantifyImpact", "[", "\[IndentingNewLine]", 
     RowBox[{
     "basemodel", ",", "country", ",", "betaHV", ",", "betaMF", ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"Vaccination", " ", "scenario", " ", "parameters"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"annualcovg", "\[Rule]", "False"}], ",", 
        RowBox[{"vaccrate", "\[Rule]", "vrate"}], ",", 
        RowBox[{"vacceff", "\[Rule]", "veff"}], ",", 
        RowBox[{"femalevacc", "\[Rule]", "True"}], ",", 
        RowBox[{"malevacc", "\[Rule]", "mvacc"}], ",", 
        RowBox[{"vaccagelow", "\[Rule]", "vlow"}], ",", 
        RowBox[{"vaccagehigh", "\[Rule]", "vhigh"}], ",", 
        RowBox[{"maleagerange", "\[Rule]", "maleAgeRange"}], ",", 
        RowBox[{"femaleagerange", "\[Rule]", "femaleAgeRange"}]}], "}"}], ",",
       "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"seasonalityFunction", "[", "country", "]"}], "}"}], ",", 
      "\[IndentingNewLine]", "0", ",", "endyr", ",", "priorR", ",", "ageover",
       ",", "lag"}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
   "]"}]}]}], "Code",
 CellChangeTimes->{{3.7112193528034077`*^9, 3.7112193742970552`*^9}, {
  3.7112194261807623`*^9, 3.7112194498964*^9}, {3.711219484971417*^9, 
  3.711219562406809*^9}, {3.7112196837383394`*^9, 3.71121971679076*^9}, {
  3.7112204039790034`*^9, 3.711220455325137*^9}, {3.711220517738079*^9, 
  3.7112205196906853`*^9}, {3.7112206371423955`*^9, 3.7112206686070986`*^9}, {
  3.7112207024726315`*^9, 3.7112207177257037`*^9}, {3.7112208822246675`*^9, 
  3.71122088313743*^9}, {3.7112977448524513`*^9, 3.71129774521634*^9}, {
  3.7112978098442154`*^9, 3.7112978676094847`*^9}, {3.711297924918034*^9, 
  3.7112979297730284`*^9}, {3.7113064883163433`*^9, 3.711306580334937*^9}, {
  3.7113080189791613`*^9, 3.711308057092841*^9}, {3.7151099164704742`*^9, 
  3.715109922973793*^9}, {3.7164709874416428`*^9, 3.7164710427067704`*^9}, {
  3.7164712148029404`*^9, 
  3.7164712298072805`*^9}},ExpressionUUID->"d2e34ddf-b315-4ae2-a692-\
0339ac333f4f"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Setup age group targeting", "Subsubsection",
 CellChangeTimes->{{3.7112968895988717`*^9, 3.711296892053542*^9}, 
   3.711308485301056*^9},ExpressionUUID->"9ff422d3-491a-4953-af5f-\
bdd52602e97d"],

Cell["\<\
Compute age group targeting for Puerto Rico, under the \[OpenCurlyQuote]best \
fit\[CloseCurlyQuote] attack rate, 90% coverage with 75% efficacy vaccine\
\>", "Text",
 CellChangeTimes->{{3.7112848777531595`*^9, 
  3.711284900497135*^9}},ExpressionUUID->"da7bd87a-485f-43c6-80da-\
6cee04ec28f5"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  RowBox[{"NotebookDirectory", "[", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.7112961049492188`*^9, 
  3.711296108474163*^9}},ExpressionUUID->"7485d6b1-9318-4616-9348-\
54d5a8d81240"],

Cell[BoxData["\<\"D:\\\\Dropbox\\\\Projects\\\\Zika vaccine\\\\Code\"\>"], \
"Output",
 CellChangeTimes->{3.711298126338483*^9, 3.7113040119719906`*^9, 
  3.711461944048524*^9, 3.7117342427780037`*^9, 
  3.7117404567127047`*^9},ExpressionUUID->"f15e0176-ef24-4021-b245-\
32bc6ba34312"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{"Clear", "@", "vaccResultsPriorImmunity"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"vaccResultsPriorImmunity", "[", 
    RowBox[{"country_", ",", "priorR_"}], "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"veff", "=", "0.75"}], ",", 
       RowBox[{"mvacc", "=", "False"}], ",", 
       RowBox[{"vlow", "=", "9"}], ",", 
       RowBox[{"vhigh", "=", "49"}], ",", 
       RowBox[{"endyr", "=", "5"}]}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"With", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"basemodel", "=", 
         RowBox[{"Get", "[", 
          RowBox[{
          "\"\<basemodel\>\"", "<>", "country", "<>", "\"\<.dat\>\""}], 
          "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"Flatten", "[", "\n", 
        RowBox[{
         RowBox[{"Table", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Association", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"\"\<attR\>\"", "\[Rule]", "attR"}], ",", 
              RowBox[{"\"\<vrate\>\"", "\[Rule]", "vrate"}], ",", 
              RowBox[{"\"\<priorR\>\"", "->", "priorR"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"\"\<Results\>\"", "\[Rule]", "\[IndentingNewLine]", 
               RowBox[{"With", "[", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{"data", "=", 
                   RowBox[{"runFrontierScenarios", "[", 
                    RowBox[{
                    "country", ",", "attR", ",", "basemodel", ",", "vrate", 
                    ",", "veff", ",", "mvacc", ",", "vlow", ",", "vhigh", ",", 
                    RowBox[{"{", "}"}], ",", 
                    RowBox[{"{", "}"}], ",", "endyr", ",", "priorR"}], 
                    "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
                 RowBox[{"Association", "[", 
                  RowBox[{"{", "\[IndentingNewLine]", 
                   RowBox[{
                    RowBox[{"\"\<vaccines\>\"", "\[Rule]", 
                    RowBox[{"pullAllVaccines", "[", 
                    RowBox[{"data", ",", "AgeClasses", ",", "True"}], "]"}]}],
                     ",", "\[IndentingNewLine]", 
                    RowBox[{"\"\<prenatalInfections\>\"", "\[Rule]", 
                    RowBox[{"pullPrenatalInfections", "[", 
                    RowBox[{
                    "data", ",", "country", ",", "AgeClasses", ",", "True"}], 
                    "]"}]}], ",", "\[IndentingNewLine]", 
                    RowBox[{"\"\<pregnancies\>\"", "\[Rule]", 
                    RowBox[{"pullPregnancies", "[", 
                    RowBox[{
                    "data", ",", "country", ",", "AgeClasses", ",", "True"}], 
                    "]"}]}], ",", "\[IndentingNewLine]", 
                    RowBox[{"\"\<population\>\"", "\[Rule]", 
                    RowBox[{"pullAllPopulation", "[", 
                    RowBox[{"data", ",", "AgeClasses", ",", "True"}], 
                    "]"}]}]}], "\[IndentingNewLine]", "}"}], "]"}]}], 
                "\[IndentingNewLine]", "]"}]}]}], "\n", "}"}], "]"}], ",", 
           RowBox[{"{", 
            RowBox[{"attR", ",", 
             RowBox[{"Range", "[", 
              RowBox[{"0.05", ",", "0.55", ",", "0.05"}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"vrate", ",", 
             RowBox[{"{", 
              RowBox[{"0", ",", "0.5", ",", "0.9"}], "}"}]}], "}"}]}], "]"}], 
         ",", "1"}], "]"}]}], "\[IndentingNewLine]", "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Code",
 CellChangeTimes->{{3.711219521342289*^9, 3.7112195798893557`*^9}, {
   3.7112204911736784`*^9, 3.711220510854018*^9}, {3.7112205648339515`*^9, 
   3.7112205732561655`*^9}, {3.7112207275745983`*^9, 3.711220761200269*^9}, {
   3.7112211038562737`*^9, 3.711221126125988*^9}, {3.711221157796819*^9, 
   3.7112213529884443`*^9}, {3.7112214737320886`*^9, 
   3.7112216005815125`*^9}, {3.711221646669015*^9, 3.711221662478444*^9}, {
   3.7112218609755125`*^9, 3.7112218665180483`*^9}, {3.7112219046675158`*^9, 
   3.711221916157387*^9}, {3.7112227992655044`*^9, 3.7112228056536245`*^9}, {
   3.7112847040913877`*^9, 3.7112847577223864`*^9}, {3.711284812490117*^9, 
   3.7112848658191395`*^9}, 3.7112976952303095`*^9, {3.711303892888295*^9, 
   3.7113039183902674`*^9}, {3.7113067737014728`*^9, 3.711306778503993*^9}, {
   3.7113083050615215`*^9, 3.711308322855015*^9}, {3.7113086918642073`*^9, 
   3.7113086970055556`*^9}, {3.7113123015775733`*^9, 
   3.7113123054444995`*^9}, {3.7117332139906435`*^9, 3.711733378005587*^9}, {
   3.7117334224656363`*^9, 3.7117335018313255`*^9}, {3.7117335584141226`*^9, 
   3.711733613392913*^9}, {3.711733785719662*^9, 3.711733798230301*^9}, {
   3.71173430120838*^9, 3.711734306475072*^9}, {3.711734931489503*^9, 
   3.7117349357527933`*^9}, {3.7117349781904182`*^9, 3.711735001082056*^9}, {
   3.711735405057421*^9, 3.711735408296402*^9}, {3.711740465641075*^9, 
   3.711740465873348*^9}, {3.7117405213974237`*^9, 3.71174052261138*^9}, 
   3.7117407121966033`*^9, {3.713886052974888*^9, 3.7138860638303223`*^9}, {
   3.7164710767754955`*^9, 3.7164710772911263`*^9}, {3.7164711899693813`*^9, 
   3.7164711993747997`*^9}},ExpressionUUID->"f3ba62ab-9cc5-4301-80b4-\
dfe7a139a17b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Run on desktop", "Subsubsection",
 CellChangeTimes->{{3.711734201578658*^9, 
  3.7117342034364777`*^9}},ExpressionUUID->"bfabeff9-948b-4472-b4c0-\
3b69b8d52a7d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Dynamic", "[", 
  RowBox[{"{", 
   RowBox[{"attR", ",", "vrate", ",", "priorR", ",", "country"}], "}"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.7112850061164484`*^9, 3.711285016609449*^9}, {
  3.711734233648608*^9, 
  3.711734239081314*^9}},ExpressionUUID->"b64d7282-0621-40f3-9f29-\
4b61d7f50502"],

Cell[BoxData[
 DynamicBox[
  ToBoxes[{$CellContext`attR, $CellContext`vrate, $CellContext`priorR, \
$CellContext`country}, StandardForm],
  ImageSizeCache->{377., {5., 16.}}]], "Output",
 CellChangeTimes->{
  3.711285016964451*^9, 3.711298095203562*^9, 3.711461944001624*^9, 
   3.7117342523962035`*^9, 3.7117343090546846`*^9, 3.711734817806873*^9, 
   3.711735003044307*^9, 3.7117354128626137`*^9, {3.7117405175454073`*^9, 
   3.711740526564648*^9}, 3.711740714791541*^9, 
   3.711740813074596*^9},ExpressionUUID->"9363953a-4c26-4991-839b-\
9c85e697e886"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  RowBox[{"NotebookDirectory", "[", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.7117345540984983`*^9, 
  3.7117345576620784`*^9}},ExpressionUUID->"4cd980c9-4e0d-496f-a49a-\
260320dc4f98"],

Cell[BoxData["\<\"D:\\\\Dropbox\\\\Projects\\\\Zika vaccine\\\\Code\"\>"], \
"Output",
 CellChangeTimes->{
  3.7117345580995455`*^9, 3.7117346825971675`*^9, {3.711734823720874*^9, 
   3.7117348434558744`*^9}, 3.711735005536621*^9, 3.711735201739582*^9, 
   3.7117354161396112`*^9, 3.7117407178757167`*^9, 
   3.7117408182611647`*^9},ExpressionUUID->"75f66704-7a66-4f25-b7b7-\
cc0adff11de5"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"AbsoluteTiming", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Do", "[", 
    RowBox[{
     RowBox[{"(", "\[IndentingNewLine]", 
      RowBox[{"With", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"result", "=", 
          RowBox[{"Flatten", "[", 
           RowBox[{"Table", "[", 
            RowBox[{
             RowBox[{"vaccResultsPriorImmunity", "[", 
              RowBox[{"country", ",", "priorR"}], "]"}], ",", 
             RowBox[{"{", 
              RowBox[{"priorR", ",", 
               RowBox[{"Range", "[", 
                RowBox[{"0", ",", "0.95", ",", "0.05"}], "]"}]}], "}"}], ",", 
             "1"}], "]"}], "]"}]}], "}"}], ",", 
        RowBox[{"(", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"SetDirectory", "[", 
           RowBox[{
            RowBox[{"NotebookDirectory", "[", "]"}], "<>", 
            "\"\<GeneratedResults/PriorRcontours\>\""}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"Put", "[", 
           RowBox[{"result", ",", 
            RowBox[{"(", 
             RowBox[{
             "\"\<results\>\"", "<>", "\"\<_\>\"", "<>", "country", "<>", 
              "\"\<.dat\>\""}], ")"}]}], "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"ResetDirectory", "[", "]"}], ";"}], "\[IndentingNewLine]", 
         ")"}]}], "]"}], "\[IndentingNewLine]", ")"}], ",", 
     RowBox[{"{", 
      RowBox[{"country", ",", 
       RowBox[{"{", "\"\<Puerto Rico\>\"", "}"}]}], 
      RowBox[{"(*", "CountryNames", "*)"}], "}"}]}], "]"}], ";"}], 
  "\[IndentingNewLine]", "]"}]], "Input",
 CellChangeTimes->{{3.711734358640956*^9, 3.711734369530511*^9}, {
   3.7117343998596945`*^9, 3.7117344037904444`*^9}, {3.711734438064399*^9, 
   3.7117344908456345`*^9}, {3.7117345367616653`*^9, 3.711734608038929*^9}, 
   3.7117346787105846`*^9, {3.7117348401698756`*^9, 3.7117348419929085`*^9}, {
   3.7117350828904076`*^9, 3.7117350845044017`*^9}, {3.7117351919696207`*^9, 
   3.7117351972247047`*^9}, {3.711735305442328*^9, 3.7117353101047444`*^9}, {
   3.7117405369753156`*^9, 3.7117405500035524`*^9}, {3.71174075877802*^9, 
   3.711740796489622*^9}, {3.716471168452565*^9, 
   3.7164711756797533`*^9}},ExpressionUUID->"c9a078aa-5e28-49bf-88d8-\
06cfeadafcec"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"7865.189522686053`", ",", "Null"}], "}"}]], "Output",
 CellChangeTimes->{3.711740667729228*^9, 3.7117407509559965`*^9, 
  3.7117486839398813`*^9},ExpressionUUID->"16cb7d3a-91df-40bf-8f53-\
2233b9c09460"]
}, Open  ]],

Cell["\<\
Test run: model took 104s for attack rate range, with vrate, priorR, and \
country only sampling one value each\
\>", "Text",
 CellChangeTimes->{{3.711740730241757*^9, 
  3.7117407472338324`*^9}},ExpressionUUID->"f445318c-8b71-4d24-8f0b-\
275eec20ed47"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"N", "[", 
  RowBox[{
   RowBox[{"Length", "[", 
    RowBox[{"Range", "[", 
     RowBox[{"0", ",", "0.95", ",", "0.05"}], "]"}], "]"}], "*", "4", "*", 
   RowBox[{"104", "/", "3600"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.7117405652882657`*^9, 3.7117405759434924`*^9}, {
  3.711740679305015*^9, 3.7117406869152865`*^9}, {3.7117407749359903`*^9, 
  3.711740800330996*^9}},ExpressionUUID->"230b5cd4-a665-4cf4-b7c8-\
e09b0ac03a2e"],

Cell[BoxData["2.311111111111111`"], "Output",
 CellChangeTimes->{{3.7117406804275*^9, 3.7117406872743125`*^9}, {
  3.71174077745754*^9, 
  3.7117408007452374`*^9}},ExpressionUUID->"e5e2e40a-fa9b-476b-b182-\
5e6e8dbdab59"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Cluster run", "Subsubsection",
 CellChangeTimes->{{3.7117336210711575`*^9, 
  3.711733622152815*^9}},ExpressionUUID->"2cd6180e-56fc-48c5-a525-\
bce5498bc154"],

Cell[BoxData[
 RowBox[{"With", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"country", "=", 
     RowBox[{"CountryNames", "[", 
      RowBox[{"[", 
       RowBox[{"ToExpression", "[", 
        RowBox[{"$CommandLine", "[", 
         RowBox[{"[", "2", "]"}], "]"}], "]"}], "]"}], "]"}]}], "}"}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{"Put", "[", 
    RowBox[{
     RowBox[{"Flatten", "[", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"vaccResultsPriorImmunity", "[", 
         RowBox[{"country", ",", "priorR"}], "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"priorR", ",", 
          RowBox[{"Range", "[", 
           RowBox[{"0", ",", "0.95", ",", "0.05"}], "]"}]}], "}"}], ",", 
        "1"}], "]"}], "]"}], ",", 
     RowBox[{"(", 
      RowBox[{
      "\"\<results\>\"", "<>", "\"\<_\>\"", "<>", "country", "<>", 
       "\"\<.dat\>\""}], ")"}]}], "]"}]}], "]"}]], "Code",
 CellChangeTimes->{{3.711733627668377*^9, 3.7117337546350894`*^9}, {
   3.7117346373906765`*^9, 3.71173464952208*^9}, 3.711913648686295*^9, {
   3.7164711408638315`*^9, 
   3.716471153427599*^9}},ExpressionUUID->"eeb8bdf9-facd-432a-8832-\
05033e182656"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1280, 677},
WindowMargins->{{-8, Automatic}, {Automatic, -8}},
Magnification:>1.75 Inherited,
FrontEndVersion->"11.1 for Microsoft Windows (64-bit) (April 18, 2017)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 178, 3, 178, "Title", "ExpressionUUID" -> \
"c59ccf06-6465-4524-8110-0fbfbd0ca33e"],
Cell[761, 27, 259, 5, 54, "Input", "ExpressionUUID" -> \
"349ae692-e577-499d-ae5a-9434b97529ed"],
Cell[CellGroupData[{
Cell[1045, 36, 248, 4, 122, "Section", "ExpressionUUID" -> \
"24ed90cd-875a-4625-92d3-b3e76788c346"],
Cell[CellGroupData[{
Cell[1318, 44, 159, 3, 83, "Subsection", "ExpressionUUID" -> \
"13fc85a0-8966-465d-8e8d-b38de185d382"],
Cell[1480, 49, 473, 12, 154, "Code", "ExpressionUUID" -> \
"ddf0b250-36b5-42db-94ee-d2adbd28380d"],
Cell[1956, 63, 505, 11, 154, "Code", "ExpressionUUID" -> \
"5dfa7cda-022a-40e7-be50-65bbce4bb351"],
Cell[2464, 76, 217, 4, 154, "Code", "ExpressionUUID" -> \
"93ee99b5-8256-4e67-882e-9d4586934bab"]
}, Closed]],
Cell[CellGroupData[{
Cell[2718, 85, 176, 3, 66, "Subsection", "ExpressionUUID" -> \
"6620f76a-bd40-4d38-9206-402189f9a0ee"],
Cell[CellGroupData[{
Cell[2919, 92, 229, 5, 54, "Input", "ExpressionUUID" -> \
"30b61c03-34c9-457f-a8e9-a4f8b518e8c4"],
Cell[3151, 99, 1646, 24, 54, "Output", "ExpressionUUID" -> \
"2a6e7d32-6926-49c5-8d8b-bc71377a277e"]
}, Open  ]],
Cell[4812, 126, 368, 8, 88, "Code", "ExpressionUUID" -> \
"fe7e3218-656c-44f2-b3e6-146f38f79bbf"]
}, Closed]],
Cell[CellGroupData[{
Cell[5217, 139, 180, 3, 66, "Subsection", "ExpressionUUID" -> \
"97ada040-05c0-457b-bb5b-1c2f80f9c61f"],
Cell[CellGroupData[{
Cell[5422, 146, 208, 3, 119, "Subsubsection", "ExpressionUUID" -> \
"4a372468-896e-4d06-951e-4772f5dc9821"],
Cell[5633, 151, 2190, 49, 575, "Code", "ExpressionUUID" -> \
"8d4bc2e2-a882-4415-8b71-3075877bd6f7"]
}, Open  ]],
Cell[CellGroupData[{
Cell[7860, 205, 203, 3, 119, "Subsubsection", "ExpressionUUID" -> \
"4e3c43ea-e205-4b7f-be66-1203ce98a326"],
Cell[8066, 210, 4241, 116, 733, "Code", "ExpressionUUID" -> \
"614bd60b-06bf-4b7c-9a45-337692100cf5"],
Cell[12310, 328, 1857, 44, 523, "Code", "ExpressionUUID" -> \
"b8c77106-1bfc-4cc3-ba67-8289422f03bb"],
Cell[14170, 374, 2200, 63, 523, "Code", "ExpressionUUID" -> \
"5f965de3-7b85-4fcd-be40-5624405c6888"],
Cell[16373, 439, 10356, 215, 2675, "Code", "ExpressionUUID" -> \
"01cb6d28-31b5-4510-b56b-519c2edd8149"],
Cell[26732, 656, 200, 4, 94, "Text", "ExpressionUUID" -> \
"f23ea951-ce36-423d-982f-437baa535e58"],
Cell[26935, 662, 921, 30, 337, "Text", "ExpressionUUID" -> \
"27c809ec-b517-464e-a181-c5b4014d3b03"],
Cell[27859, 694, 496, 19, 157, "Text", "ExpressionUUID" -> \
"31424df6-43fa-491c-9e8c-18feefa4fe54"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[28404, 719, 174, 3, 66, "Subsection", "ExpressionUUID" -> \
"296050f5-ca4d-457f-ab29-c44673368031"],
Cell[28581, 724, 233, 4, 52, "Text", "ExpressionUUID" -> \
"2e6d63b1-be0f-4bd1-857e-e3d888270d10"],
Cell[28817, 730, 1227, 33, 209, "Code", "ExpressionUUID" -> \
"79b1b928-7c53-40e7-ae86-5bdad498ed5c"]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[30093, 769, 194, 3, 94, "Section", "ExpressionUUID" -> \
"f28e4916-1a43-476a-b766-3666eb40ec97"],
Cell[CellGroupData[{
Cell[30312, 776, 201, 3, 83, "Subsection", "ExpressionUUID" -> \
"4787be02-9763-426f-8711-483819743994"],
Cell[CellGroupData[{
Cell[30538, 783, 305, 5, 68, "Subsubsection", "ExpressionUUID" -> \
"0789a4df-8d80-4b93-be41-627993f465fe"],
Cell[CellGroupData[{
Cell[30868, 792, 232, 5, 54, "Input", "ExpressionUUID" -> \
"84dea54f-3062-4fce-a10d-cb18017c8b02"],
Cell[31103, 799, 447, 7, 54, "Output", "ExpressionUUID" -> \
"748706e9-4af8-4aaa-a49f-c702c8fb8873"]
}, Open  ]],
Cell[CellGroupData[{
Cell[31587, 811, 192, 4, 54, "Input", "ExpressionUUID" -> \
"6a27a51c-1b04-4d71-89b3-6402936eff09"],
Cell[31782, 817, 388, 7, 54, "Output", "ExpressionUUID" -> \
"acdfa068-8db4-4552-99cc-a00bc8c815ab"]
}, Open  ]],
Cell[CellGroupData[{
Cell[32207, 829, 6716, 134, 1041, "Input", "ExpressionUUID" -> \
"6b3c0341-9bbb-4b3b-8725-3e706cb5254f"],
Cell[38926, 965, 514, 9, 54, "Output", "ExpressionUUID" -> \
"a9a5a55c-34f7-472b-8fbc-7ae3263afde6"]
}, Open  ]],
Cell[CellGroupData[{
Cell[39477, 979, 311, 7, 54, "Input", "ExpressionUUID" -> \
"4da76c2d-8713-4a93-a8a4-4c140ba53e05"],
Cell[39791, 988, 452, 7, 89, "Output", "ExpressionUUID" -> \
"6c50bd8e-cdf3-475e-966a-84e78c732e7a"]
}, Open  ]],
Cell[40258, 998, 297, 8, 54, "Input", "ExpressionUUID" -> \
"5d17dcef-39da-4514-830c-c8b0c38640c3"]
}, Closed]]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[40616, 1013, 196, 3, 94, "Section", "ExpressionUUID" -> \
"733c7398-fc64-47d0-82bf-e6a698341f34"],
Cell[40815, 1018, 266, 7, 149, "Code", "ExpressionUUID" -> \
"bb7ad88e-2388-4784-92c2-5bf3b84ab011"],
Cell[CellGroupData[{
Cell[41106, 1029, 216, 4, 68, "Subsubsection", "ExpressionUUID" -> \
"4c4f8b6e-48ac-4355-b9af-5a5276a7a523"],
Cell[41325, 1035, 411, 8, 119, "Text", "ExpressionUUID" -> \
"5728e919-a7d3-4720-bb0a-e755462c4783"],
Cell[41739, 1045, 3250, 66, 479, "Code", "ExpressionUUID" -> \
"d2e34ddf-b315-4ae2-a692-0339ac333f4f"]
}, Open  ]],
Cell[CellGroupData[{
Cell[45026, 1116, 201, 3, 68, "Subsubsection", "ExpressionUUID" -> \
"9ff422d3-491a-4953-af5f-bdd52602e97d"],
Cell[45230, 1121, 304, 6, 86, "Text", "ExpressionUUID" -> \
"da7bd87a-485f-43c6-80da-6cee04ec28f5"],
Cell[CellGroupData[{
Cell[45559, 1131, 232, 5, 54, "Input", "ExpressionUUID" -> \
"7485d6b1-9318-4616-9348-54d5a8d81240"],
Cell[45794, 1138, 285, 5, 54, "Output", "ExpressionUUID" -> \
"f15e0176-ef24-4021-b245-32bc6ba34312"]
}, Open  ]],
Cell[46094, 1146, 5350, 101, 629, "Code", "ExpressionUUID" -> \
"f3ba62ab-9cc5-4301-80b4-dfe7a139a17b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[51481, 1252, 167, 3, 68, "Subsubsection", "ExpressionUUID" -> \
"bfabeff9-948b-4472-b4c0-3b69b8d52a7d"],
Cell[CellGroupData[{
Cell[51673, 1259, 325, 8, 54, "Input", "ExpressionUUID" -> \
"b64d7282-0621-40f3-9f29-4b61d7f50502"],
Cell[52001, 1269, 556, 11, 54, "Output", "ExpressionUUID" -> \
"9363953a-4c26-4991-839b-9c85e697e886"]
}, Open  ]],
Cell[CellGroupData[{
Cell[52594, 1285, 234, 5, 54, "Input", "ExpressionUUID" -> \
"4cd980c9-4e0d-496f-a49a-260320dc4f98"],
Cell[52831, 1292, 390, 7, 54, "Output", "ExpressionUUID" -> \
"75f66704-7a66-4f25-b7b7-cc0adff11de5"]
}, Open  ]],
Cell[CellGroupData[{
Cell[53258, 1304, 2268, 49, 395, "Input", "ExpressionUUID" -> \
"c9a078aa-5e28-49bf-88d8-06cfeadafcec"],
Cell[55529, 1355, 243, 5, 54, "Output", "ExpressionUUID" -> \
"16cb7d3a-91df-40bf-8f53-2233b9c09460"]
}, Open  ]],
Cell[55787, 1363, 263, 6, 86, "Text", "ExpressionUUID" -> \
"f445318c-8b71-4d24-8f0b-275eec20ed47"],
Cell[CellGroupData[{
Cell[56075, 1373, 455, 10, 54, "Input", "ExpressionUUID" -> \
"230b5cd4-a665-4cf4-b7c8-e09b0ac03a2e"],
Cell[56533, 1385, 221, 4, 54, "Output", "ExpressionUUID" -> \
"e5e2e40a-fa9b-476b-b182-5e6e8dbdab59"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[56803, 1395, 164, 3, 68, "Subsubsection", "ExpressionUUID" -> \
"2cd6180e-56fc-48c5-a525-bce5498bc154"],
Cell[56970, 1400, 1159, 31, 119, "Code", "ExpressionUUID" -> \
"eeb8bdf9-facd-432a-8832-05033e182656"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

