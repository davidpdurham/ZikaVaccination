# Zika vaccination model
### Authors
David P Durham<sup>1</sup>, Meagan C Fitzpatrick<sup>1,2</sup>, Martial L Ndeffo-Mbah<sup>1</sup>, Alyssa S Parpia<sup>1</sup>, 
Nelson L Michael<sup>3</sup>, Alison P Galvani<sup>1</sup>

### Affiliation
<sup>1</sup>Center for Infectious Disease Modeling and Analysis
Yale School of Public Health
135 College St, New Haven, CT 06510

<sup>2</sup>Center for Vaccine Development
University of Maryland School of Medicine
685 W Baltimore St, Baltimore, MD 21201

<sup>3</sup>U.S. Military HIV Research Program (MHRP)
Walter Reed Army Institute of Research
6720A Rockledge Drive, Bethesda, MD 20817

### Date
Fall 2017

## Overview
### Software
The code is written in Mathematica v11. 
By default, Mathematica input has an "Input" style. This style may be changed to the "Code" style by highlighting a cell
and pressing Alt+8 (on PC) or choosing the relevant style from the menubar.
At the start of the project, the software was manually configured to generate package files from any code blocks 
(Format menu -> Options Inspector -> "Global Preferences" -> Notebook Options -> File Options -> AutoGeneratedPackage set to Automatic). 


### Hardware
Simulations are run on Windows 10, and on the Yale Farnam HPC (high-powered computing) cluster. Cluster task scheduling is completed using SLURM. 
Each set of data generated on the cluster is included in a unique sub-folder.
The source code used to generate it has been included in a subdirectory, within the unique sub-folder, entitled "src".

## Setup
The file "Zika vaccine model setup.nb" contains all commands necessary to run the base model, which are also
auto-generated in the package "Zika vaccine model setup.m". In addition, the ".nb" file contains functionality to generate
the 34 files "baseModelX.dat", with X being replaced by each of the 34 countries. These files contain the data necessary to
configure the model for each of the 34 countries, which saves time during subsequent analyses.

## Calibration
### Puerto Rico calibration and validation figure generation
First, the model is configured to the Puerto Rico outbreak curve, based upon the CDC reported data downloaded from the CDC github 
(https://github.com/cdcepi/zika) and copied in the local directory "/InputData/PuertoRicoData". The notebook file 
"CalibrationPuertoRico.nb" processes this calibration. The corresponding calibration data, generated on the HPC, is stored
in the directory "Data/Calibration with seasonality". The exact source code used on the HPC is stored in "Data/Calibration with seasonality/src".

### Country-specific attack rate calibration
For each of 34 countries, the transmission rates corresponding to attack rates ranging from 5-50% are estimated using the code in the file
"CalibrationAllCountries.nb". Relevant intermediary data and source code are in the directory "Data/AttackRateCalibration".
The file "nonsexualTransmissionRates.dat" contains the mapping of attack rate to transmission rate for all 34 countries.

## Projections
### Figure 1 - Puerto Rico zika vaccine impact
The data for Figure 1 is generated using the code in the section "Run time series of vaccination impact scenarios" of the file "GenerateZikaResults.nb". The data is stored in the file "/GeneratedResults/VaccineImpactTimeSeries/vaccineTimeSeriesScenarios.dat". Figure 1 is plotted in the section "Figure 1 - Plot time series" of the file "PlotResults.nb"

### Figure 3 - Prior resistance
Data for the figures plotting vaccine impact under pre-existing immunity (Figure 3) are generated in the section "Run prior immunity / coverage contour scenarios" of "GenerateZikaResults.nb". These code are run on the HPC, following the specific code blocks generated in the package "GenerateZikaResults.m".

### Figure 4-6 - Age-specific vaccination
Data for Figures 4-6, which plot age-specific vaccination strategies, are generated in the section "Run age-specific scenarios" of the file "GenerateZikaResults.nb". These code are run on the HPC, following the specific code blocks generated in the package "GenerateZikaResults.m".

## Uncertainty analysis
### Figure 2 and Table 1
The data for Figure 2 and Table 1 (impact and confidence intervals of increasing coverage) are generated on the HPC using the code in the subdirectory "GeneratedResults/Uncertainty/src". The data are located in zip files in the directory "GeneratedResults/Uncertainty".